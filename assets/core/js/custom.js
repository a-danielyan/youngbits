/* =============================================================================   Spudu   Custom JS   All changes made in this file will override the default styles.   ========================================================================== */var base_url = document.location.origin;var amount_value = 0$(".sel").on('change',function () {    if($(".sel:checked").length > 0){        $('.downloadPDF').attr('disabled',false);    }else{        $('.downloadPDF').attr('disabled',true);    }})var inv_arr=[];var inv_select_pdf=[];$(document).on('click', '.download_select_pdf', function (){    $.ajax({        url:"../../invoices/generate_select_invoice_pdf",        type:'post',        data:{inv_select_pdf:inv_select_pdf,_ip_csrf:Cookies.get('ip_csrf_cookie')},        success: function(data) {            window.location.href='http://spudu.loc/index.php/invoices/download_pdf_zip'        }    });});$(".sel").on('click',function () {    $('.action_edit_inv_numb').html('<button class="btn btn-primary edit_inv_number">Edit invoice number</button><button class="btn btn-primary save_inv_number" disabled>Save</button>')    var data_amount = Number($(this).data('amount'));    var inv_id = $(this).val();    var inv_numb =   $(this).parents("tr").find('td .inv_number').text().trim();    amount_value = Number($('.amount_val').text().replace('$', ''));    inv_arr.push({'inv_id':inv_id,'inv_numb':inv_numb})    inv_select_pdf.push(inv_id)    if($('.sel').is(':checked')){        $('.action_edit_inv_numb').css('display','block')    }    if ($(this).hasClass('checkedSel')) {        if($(this).is(':checked')){             amount_value += Number(data_amount);             $('.sum_content .amount_val').text('$' + parseFloat(Math.round(amount_value * 100) / 100).toFixed(2));        }else{            amount_value -= Number(data_amount);            $('.sum_content .amount_val').text('$' + parseFloat(Math.round(amount_value * 100) / 100).toFixed(2));        }    }else{        if ($('.amount_val').text() == 0 ) {            $('.sum_content .amount_val').text('$' + parseFloat(Math.round(data_amount * 100) / 100).toFixed(2));            $('.selected_amt').addClass('show_amt')        }else{            if($(this).is(':checked')){                 amount_value += Number(data_amount);                 $('.sum_content .amount_val').text('$' + parseFloat(Math.round(amount_value * 100) / 100).toFixed(2));            }else{                for (var i = 0; i < inv_arr.length; i++) {                    if(+inv_arr[i]['inv_id'] === +inv_id){                        inv_arr.splice($.inArray(inv_arr[i], inv_arr),1);                    }                    if(!$('.sel').is(':checked')){                        inv_arr=[];                        $('.action_edit_inv_numb').css('display','none')                    }                }                    amount_value -= Number(data_amount);                    $('.sum_content .amount_val').text('$' + parseFloat(Math.round(amount_value * 100) / 100).toFixed(2));                if ( amount_value == 0) {                    $('.selected_amt').removeClass('show_amt');                    $('.amount_val').html('')                }            }        }    }})$(document).on('click', '.edit_inv_number', function () {    for (var i = 0; i <inv_arr.length ; i++) {        var v_inv_id=inv_arr[i]['inv_id'];        var rem = $(`.sel[value=${v_inv_id}]`).parents('tr').find(`.inv_number`)        rem.parent().append('<input value="'+inv_arr[i]['inv_numb']+'" class="form-control inv_id"><input type="hidden" value="'+v_inv_id+'" class="inv_n">')        rem.parent().find('.inv_number').remove()    }});var inv_arr_res=[];$(document).on('input', '.inv_id', function () {    $('.save_inv_number').attr('disabled',false)})$(document).on('click', '.save_inv_number', function () {    var all_cheked = $('.sel:checked');    for (var i = 0; i <all_cheked.length ; i++) {        var rem =$(all_cheked[i]).parents('tr');        var v_inv_num=rem.find(`.inv_id`).val()        var v_inv_ids=rem.find(`.sel`).val()        inv_arr_res.push({            'inv_id':v_inv_ids,            'inv_num':v_inv_num        })    }    if(inv_arr_res.length > 0){        $.ajax({            url:"../../invoices/ajax/edit_inv_number",            type:'post',            data:{inv_res:inv_arr_res},            success: function(data) {                $('.sel').prop('checked',false)                var res = JSON.parse(data)                for (var i = 0; i <res.length ; i++) {                    var v_inv_id=res[i]['inv_id'];                    var rem = $(`.sel[value=${v_inv_id}]`).parents('tr').find(`.inv_id`)                    rem.parent().append('<a href="../invoices/view/'+v_inv_id+'" class="inv_number">'+res[i]["inv_num"]+'</a>')                    rem.parent().find('.inv_id').remove()                }                $('.action_edit_inv_numb').css('display','none');                inv_arr = [];                inv_arr_res =[];            }        });    }})$(".sel").on('change',function () {    if($(".sel:checked").length > 0){        $('.sendMultiMail').attr('disabled',false);    }else{        $('.sendMultiMail').attr('disabled',true);    }})$('.checkAllSelExpenses').on('change',function () {    if($(this).is(':checked')){        $('.selExpenses').attr('checked','checked')        var status = $("input[name='status']").val()+'/status/all';        var url = $("input[name='url']").val()+'/total_price';         $.ajax({            url:url,            type:'post',            dataType:'json',            data:{url:location.href,status:'draft'},            success: function(data) {                 $('.sum_content .amount_val').text('Selected: $' + parseFloat(Math.round(data.dollar * 100) / 100).toFixed(2));                 $('.sum_content .euro').text('Selected: €' + parseFloat(Math.round(data.euro * 100) / 100).toFixed(2));                 $('.selected_amt').addClass('show_amt')            }        });    }else{        $('.selExpenses').removeClass('checkedSel')        $('.selected_amt').removeClass('show_amt')        $('.amount_val').html('')        $(".selExpenses").prop('checked',false).change();    }})var kilometers = 0;$('.selAppointmentKilometers').on('click',function () {    var kl = $(this).data('kilometer');    if($(this).is(':checked')){        kilometers +=kl;    }else{        kilometers -=kl;    }    $('.sel_kilometer').html("Selected : "+kilometers);})$('.checkAllSelKilometer').on('change',function () {    kilometers = 0;    // $('.sel_kilometer').html("Selected : "+kilometers);    if($(this).is(':checked')){        $('.selAppointmentKilometers').attr('checked','checked')        var url = $("input[name='url']").val()+'/total_kilometers';         $.ajax({            url:url,            type:'post',            dataType:'json',            data:{url:location.href,status:'ajax'},            success: function(data) {                kilometers = data;                $('.sel_kilometer').html("Selected : "+ data.toLocaleString());            }        });    }else{        $('.sel_kilometer').html('')        $(".selAppointmentKilometers").prop('checked',false).change();    }})var euro_sum = 0;var dollar_sum = 0;var sel_expenses = [];var sel_statements = [];$(".selStatements").on('click',function () {    $('.action_edit_statement').html('<button class="btn btn-primary edit_stat">Edit statements</button><button class="btn btn-primary save_statements" disabled>Save</button>')    if($(this).is(':checked')) {        sel_statements.push($(this).val())        $(this).addClass('sel_statements_delete')    }else{        sel_statements.splice(sel_statements.indexOf($(this).val()),1);        $(this).removeClass('sel_statements_delete')    }    if(sel_statements.length > 0){        $('.delete_sel_statements').removeClass('d-none')        $('.action_edit_statement').removeClass('hidden');    }else{        $('.delete_sel_statements').addClass('d-none')        $('.action_edit_statement').addClass('hidden');        $(`.s_type`).removeClass('hidden');        $(`.stat_type`).addClass('hidden');        $(`.s_user`).removeClass('hidden');        $(`.stat_user`).addClass('hidden');        $(`.s_project`).removeClass('hidden');        $(`.stat_project`).addClass('hidden');        $(`.s_parent`).removeClass('hidden');        $(`.stat_parent`).addClass('hidden');        $(`.s_category`).removeClass('hidden');        $(`.stat_category`).addClass('hidden');        $(`.s_desc`).removeClass('hidden');        $(`.stat_desc`).addClass('hidden');    }})$(document).on('click', '.edit_stat', function () {    for (var i = 0; i <sel_statements.length ; i++) {        // console.log(sel_statements[i])        var stat_id = sel_statements[i];        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_type`).addClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_type`).removeClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_user`).addClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_user`).removeClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_project`).addClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_project`).removeClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_parent`).addClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_parent`).removeClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_category`).addClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_category`).removeClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_desc`).addClass('hidden');        $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_desc`).removeClass('hidden');    }    $('.save_statements').attr('disabled',false)});var stat_arr_res = []$(document).on('click', '.save_statements', function () {    var all_checked = $('.selStatements:checked');    for (var i = 0; i <all_checked.length ; i++) {        var obj =$(all_checked[i]).parents('tr');        var stat_type=obj.find(`.stat_type`).val()        var stat_user=obj.find(`.stat_user`).val()        var stat_project=obj.find(`.stat_project`).val()        var stat_parent=obj.find(`.stat_parent`).val()        var stat_category=obj.find(`.stat_category`).val()        var stat_desc=obj.find(`.stat_desc`).val()        var stat_ids=obj.find(`.selStatements`).val()        var stat_username=obj.find(`.stat_user option:selected`).text()        var stat_projectname=obj.find(`.stat_project option:selected`).text()        stat_arr_res.push({            'stat_id':stat_ids,            'stat_type':stat_type,            'stat_user':stat_user,            'stat_project':stat_project,            'stat_parent':stat_parent,            'stat_category':stat_category,            'stat_desc':stat_desc,            'stat_username':stat_username,            'stat_projectname':stat_projectname,        })    }    if(stat_arr_res.length > 0){        $.ajax({            url:"../bank_statements/save_statement",            type:'post',            data:{stat_res:stat_arr_res},            success: function(data) {                $('.selStatements').prop('checked',false)                var res = JSON.parse(data)                for (var i = 0; i <res.length ; i++) {                    var stat_id=res[i]['stat_id'];                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_type`).text(res[i]['stat_type']).removeClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_type option[value=`+res[i]['stat_type']+`]`).attr('selected','selected');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_type`).addClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_user`).text(res[i]['stat_username']).removeClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_user option[value=`+res[i]['stat_user']+`]`).attr('selected','selected');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_user`).addClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_project`).text(res[i]['stat_projectname']).removeClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_project option[value=`+res[i]['stat_project']+`]`).attr('selected','selected');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_project`).addClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_parent`).text(res[i]['stat_parent']).removeClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_parent option[value=`+res[i]['stat_parent']+`]`).attr('selected','selected');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_parent`).addClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_category`).text(res[i]['stat_category']).removeClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_category`).val(res[i]['stat_category']);                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_category`).addClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.s_desc`).text(res[i]['stat_desc']).removeClass('hidden');                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_desc`).val(res[i]['stat_desc']);                    $(`.selStatements[value=${stat_id}]`).parents('tr').find(`.stat_desc`).addClass('hidden');                            }                $('.action_edit_statement').addClass('hidden');                $('.delete_sel_statements').addClass('d-none')                stat_arr_res =[];            }        });    }})// Attach file is listview$('.upload_file').click(function(event){    event.preventDefault();    $(this).parent().find('.attach_file').trigger('click');})// End attach file// Add statement in list$('.add_record').click(function(){    var url = $('.url_fields').val();    $.ajax({        url:url,        type:'post',        data:{action:'add'},        success: function(data) {            var result = JSON.parse(data);            var users_list = '';            var projects_list = '';            var statements_list = '';            $.each(result.users, function( index, value ) {                var user = '<option value = '+value.user_id+'>'+value.user_name+'</option>';                users_list += user;            });            $.each(result.projects, function( index, value ) {                var project = '<option value = '+value.project_id+'>'+value.project_name+'</option>';                projects_list += project;            });            $.each(result.statements, function( index, value ) {                var statement = '<option value = '+value.id+'>'+value.id+'</option>';                statements_list += statement;            });            // console.log(users_list)            var obj = '<tr class = "added_row">';                obj += '<td></td>';                obj += '<td></td>';                obj += '<td><input type = "date" name = "record_date" class = "record_date form-control"></td>';                obj += '<td><input type = "text" name = "record_amount" class = "record_amount form-control"></td>';                // Type                obj += '<td>';                    obj += '<select class = "form-control record_type" name = "record_type">';                        obj += '<option></option>'                        obj += '<option value = "paypal">Paypal</option>'                        obj += '<option value = "bank">Bank</option>'                        obj += '<option value = "cash">Cash</option>'                    obj += '</select>';                obj += '</td>';                // Users                 obj += '<td>';                    obj += '<select class = "form-control record_user" name = "record_user">';                        obj += '<option></option>'                        obj += users_list;                    obj += '</select>';                obj += '</td>';                // Projects                obj += '<td>';                    obj += '<select class = "form-control record_project" name = "record_project">';                        obj += '<option></option>'                        obj += projects_list;                    obj += '</select>';                obj += '</td>';                // Parent                obj += '<td>';                    obj += '<select class = "form-control record_parent" name = "record_parent">';                        obj += '<option></option>'                        obj += statements_list;                    obj += '</select>';                obj += '</td>';                obj += '<td><input type = "text" name = "record_category" class = "form-control record_category"></td>';                obj += '<td><input type = "text" name = "record_account" class = "form-control record_account"></td>';                obj += '<td><input type = "text" name = "record_desc" class = "form-control record_desc"></td>';                obj += '<td></td>';                obj += '<td class = "text-center"><span class = "fa fa-trash delete_record"></span></td>'            obj += '</tr>';            $('#statement_table').prepend(obj);            $('.save_record').removeClass('hidden');        }    });});var added_records = [];$('.save_record').click(function(){    var _this = $(this);    var all_records = $('.added_row');    for (var i = 0; i <all_records.length ; i++) {        var obj =$(all_records[i]);        var record_date=obj.find(`.record_date`).val()        var record_amount=obj.find(`.record_amount`).val()        var record_type=obj.find(`.record_type`).val()        var record_user=obj.find(`.record_user`).val()        var record_project=obj.find(`.record_project`).val()        var record_parent=obj.find(`.record_parent`).val()        var record_category=obj.find(`.record_category`).val()        var record_account=obj.find(`.record_account`).val()        var record_desc=obj.find(`.record_desc`).val()        added_records.push({            'record_date':record_date,            'record_amount':record_amount,            'record_type':record_type,            'record_user':record_user,            'record_project':record_project,            'record_parent':record_parent,            'record_category':record_category,            'record_account':record_account,            'record_desc':record_desc,        })    }    if(added_records.length > 0){        $.ajax({            url:"../bank_statements/save_record",            type:'post',            data:{records: added_records},            success: function(data) {                var result = JSON.parse(data);                if(result.status){                    $('.added_row').remove();                    _this.addClass('hidden')                }            }        })    }});$(document).on('click', '.delete_record', function () {    $(this).parent().parent().remove()})// End add statement$(document).on('click', '.delete_sel_statements', function () {    var url = $("input[name='url_statements']").val();    $.ajax({        url:url,        type:'post',        data:{sel_statements:sel_statements},        success: function(data) {            console.log(data)          $('.sel_statements_delete').parents('tr').remove()            $('.delete_sel_statements').addClass('d-none')        }    });});$(".selExpenses").on('click',function () {    var euro_data = $('span.selected_amt.euro.show_amt').text().replace('Selected: €', '');    var dollar_data = $('span.selected_amt.dollar.show_amt').text().replace('Selected: $', '');    if($(this).is(':checked')) {        sel_expenses.push($(this).val())        $(this).addClass('sel_expenses_delete')    }else{        sel_expenses.splice(sel_expenses.indexOf($(this).val()),1);        $(this).removeClass('sel_expenses_delete')    }    if(sel_expenses.length > 0){        $('.delete_sel_expenses').removeClass('d-none')    }else{        $('.delete_sel_expenses').addClass('d-none')    }    if($(this).hasClass("selEuro")){        var euro_amount = 0;        if($(this).data('amount')){            euro_amount =($(this).data('amount')+'').replace(',','')        }        euro_amount =parseFloat(euro_amount);        if($(this).is(':checked')){            console.log($(this).val())            euro_sum+=Number(euro_amount);            $('.sum_content .euro').text('Select: €' + parseFloat(Math.round(euro_sum * 100) / 100).toFixed(2));            $('.selected_amt').addClass('show_amt')        }else{            if(Number(euro_data) > 0){                euro_sum=Number(euro_data);            }            euro_sum-=Number(euro_amount);            $('.sum_content .euro').text('Select: €' + parseFloat(Math.round(euro_sum * 100) / 100).toFixed(2));            if(euro_sum === 0){                $('.euro').removeClass('show_amt');            }        }    }    if($(this).hasClass( "selDollar" )){        var dollar_amount =$(this).data('amount');        if($(this).is(':checked')){            dollar_sum+=Number(dollar_amount);            $('.sum_content .dollar').text('Select: $' + parseFloat(Math.round(dollar_sum * 100) / 100).toFixed(2));            $('.selected_amt').addClass('show_amt')        }else{            if(Number(dollar_data) > 0){                dollar_sum=Number(dollar_data);            }            dollar_sum-=Number(dollar_amount);            $('.sum_content .dollar').text('Select: $' + parseFloat(Math.round(dollar_sum * 100) / 100).toFixed(2));            if(dollar_sum === 0){                $('.dollar').removeClass('show_amt');            }        }    }})$(document).on('click', '.delete_sel_expenses', function () {    var url = $("input[name='url_expenses']").val();    $.ajax({        url:url,        type:'post',        data:{sel_expenses:sel_expenses},        success: function(data) {            console.log(data)          $('.sel_expenses_delete').parents('tr').remove()            $('.delete_sel_expenses').addClass('d-none')        }    });});/*END EXPENSES*//*START Upfront Payments*/$('.checkAllSelUpfrontPayments').on('change',function () {    if($(this).is(':checked')){        $('.sel').attr('checked','checked')        var url = $("input[name='url']").val()+'/total_price';        $.ajax({            url:url,            type:'post',            dataType:'json',            data:{url:location.href},            success: function(data) {                console.log(data)                $('.sum_content .amount_val').text('Selected: $' + parseFloat(Math.round(data * 100) / 100).toFixed(2));                $('.selected_amt').addClass('show_amt')            }        });    }else{        $('.selExpenses').removeClass('checkedSel')        $('.selected_amt').removeClass('show_amt')        $('.amount_val').html('')        $(".selExpenses").prop('checked',false).change();    }})$(document).on('input', '#upfront_payments_amount', function(){    var amount = $(this).val();    var discount = $('#upfront_payments_discount').val();    var total = 0;    if(discount !== 0){        total =  (amount * discount) / 100;    }    console.log(total)})$(document).on('input', '#upfront_payments_discount', function(){    var amount = $(this).val();    var discount = $('#upfront_payments_amount').val();    var total = 0;    if(discount !== 0){        total =  (amount * discount) / 100;    }   $('#upfront_payments_discount_total').val(total).attr('value', total)})$('.downloadPDF').on('click', function () {    var url = $(this).data('url');    var chkArray = '';    $(".sel:checked").each(function() {        chkArray += $(this).val()+'_';    });    if(chkArray.length > 0){        chkArray = chkArray.substring(0, chkArray.length - 1);        window.open(url+chkArray, '_blank');    }})$('.sendMultiMail').on('click', function () {    var url = $(this).data('url');    var chkArray = '';    $(".sel:checked").each(function() {        if($(this).val() !== ''){            chkArray += $(this).val()+',';        }    });    if(chkArray.length > 0){        location.href = "mailto:"+chkArray;    }});    $(document).on('click', 'input[name="appointment_recurring_checked"]',  function(){    var option = $(this).val();    if(option == 0){        $('.recurring_checked').addClass('hidden');    }    else{        $('.recurring_checked').removeClass('hidden');    }});$(document).on('click','input[name="appointment_invoice_checked"]', function(){    var option = $(this).val();    if(option == 0){        $('.sel').addClass('hidden');    }    else{        $('.sel').removeClass('hidden');    }});$(document).on('click', 'input[name="appointment_invoice_kilometer_checked"]', function(){    var option = $(this).val();    if(option == 0){        $('.kilometer_checked').addClass('hidden');    }    else{        $('.kilometer_checked').removeClass('hidden');    }});$(document).on('click','input[name="appointment_stayawaykey_checked"]',  function(){    var option = $(this).val();    if(option == 0){        $('.stayawaykey_checked').addClass('hidden');    }    else{        $('.stayawaykey_checked').removeClass('hidden');    }});$(document).on('click','input[name="appointment_carpool_checked"]', function(){    var option = $(this).val();    if(option == 0){        $('.appointment_carpool_checked').addClass('hidden');    }    else{        $('.appointment_carpool_checked').removeClass('hidden');    }});$(document).on('change','input[name=email_template_img]', function(){    var formData = new FormData($('#email_template_form')[0]);    formData.append("_ip_csrf", $('input[name="_ip_csrf"]').val());    formData.append("dddddd", 1111);    // formData.append("ip_csrf_cookie", Cookies.get('ip_csrf_cookie'));    // var files =$('input[name="email_template_img_url"]')[0].files[0]    // console.log(files)    $.ajax({        url:base_url+"/index.php/email_templates/ajax/get_email",        type:'post',        processData: false,        contentType:false,        data:formData,        success: function(data) {            $('#email_template_img_url').val("<img src='"+data+"' width='700' style='display: block;margin: auto;'>")            $('#email_template_img_url').attr('disabled',false)        }    });})$(document).ready(function (e) {    Dropzone.autoDiscover = false;    Dropzone.options.fileupload = { acceptedFiles: '/*', maxFilesize: 500};    var dropzoneNextForm = false;    var $dropZone = $("#dZUpload").dropzone({        init: function() {            myDropzone = this;            $.ajax({                url: 'upload',                type: 'post',                data: {request: 2},                dataType: 'json',                success: function(response){                     dropzoneNextForm = true                    console.log(response)                    $.each(response, function(key,value) {                        var mockFile = { name: value};                        console.log(value)                        myDropzone.emit("addedfile", mockFile);                        myDropzone.emit("thumbnail", mockFile, value);                    });                }            });        },        url: "file_upload",        addRemoveLinks: true,        autoProcessQueue: false,        uploadMultiple: true,        parallelUploads: 50,        maxFiles: 50,        success: function (file, response) {            var imgName = response;            file.previewElement.classList.add("dz-success");            console.log("Successfully uploaded :" + imgName);            window.location.replace("form");        },        error: function (file, response) {            file.previewElement.classList.add("dz-error");        },        /*addedfile: function (file) {            console.log(file)        }*/    });    if(dropzoneNextForm === false){        $(".dropzone #btn-submit").click(function (e) {            e.preventDefault();            $dropZone[0].dropzone.processQueue();        });    }});